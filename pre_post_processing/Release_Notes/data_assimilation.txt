Last update: April 18th 2013, Dan J. Bower

----------------
Scripts affected
----------------

Temp_history_gen.py
Create_history.py

-----
Notes
-----

(a) Overall method is the same as previous, although some file names
may be different in this revised version

(1) The pid file is a central part of the work flow.  You must make
sure that all parameters are set correctly in the pid file to ensure
that your data assimilation files are built correctly and are
consistent with your model.

(2) Running Create_history.py with no arguments will produce an input
configuration file that contains all of the parameters that you may
wish to change.

(3) For computed temperature grids:
    (a) Minimum temperature is always 0
    (b) Maximum temperature always <= 1
This is because CitcomS may still be hard-coded in certain places to
truncate the temperature between 0 and 1 (e.g., in some viscosity
formulations).  We therefore want to make sure that the data
assimilation scripts follow the same convention.

(4) CMB temperature is always 1 if a lower thermal boundary layer is
selected and therefore is no longer specified in the input
configuration file.

(5) [For compressible (TALA) or extended-Boussinesq models only].  By default, temperature input files for data assimilation are constructed with a super adiabatic temperature drop across the mantle.  If you include an adiabat, specify the adiabatic temperature drop using the same super adiabatic temperature scaling.  This is because the script will rescale all temperatures to be between 0 and 1, in accordance with (3) and (4) above.  Because the temperatures are rescaled, you will then need to change your CitcomS Rayleigh number at the start of a new run to the correct temperature drop dT(total) = dT(super adiabatic) + dT(adiabat).

